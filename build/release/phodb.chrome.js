!function(){"use strict";var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var n=(t.prototype.add=function(t){var e=new Date,n=o({id:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)})}(),createdAt:e.getTime(),updateAt:e.getTime()},t);return this._localData.push(n),this._commit(),Promise.resolve(n)},t.prototype.remove=function(e){var t=this._localData.findIndex(function(t){return t.id==e});return t<0?Promise.resolve(!1):(this._localData.splice(t,1),this._commit(),Promise.resolve(!0))},t.prototype.update=function(e,t){var n=new Date,r=this._localData.findIndex(function(t){return t.id==e});return r<0?Promise.resolve(null):(t.updateAt=n.getTime(),this._localData[r]=o({},this._localData[r],t),this._commit(),Promise.resolve(this._localData[r]))},t.prototype.findOne=function(t){var e=this._localData.find(t);return Promise.resolve(e)},t.prototype.where=function(t){var e=this._localData.filter(t);return Promise.resolve(e)},t.prototype.list=function(){return this._localData},t.prototype.getName=function(){return this._name},t.prototype._commit=function(){var t;this._setFunc(((t={})[this._name]=this._localData,t))},t);function t(t,e,n){var r=this;this._name=t,this._setFunc=e,this._getFunc=n,this._getFunc(function(t){r._localData=t[r._name]||[]})}var e=(r.prototype.table=function(t){if(this.exist(t))throw Error("This table name already created.");var e=new n(t,this._setFunc,this._getFunc);return this._tables.push(e),e},r.prototype.exist=function(t){return this._tables.forEach(function(t){t.getName()}),!1},r);function r(t){if(this._tables=[],t)return this._getFunc=t.getFunc,void(this._setFunc=t.setFunc);this._getFunc=function(e){chrome.storage.local.get(null,function(t){e(t)})},this._setFunc=function(t){chrome.storage.local.set(t)}}window.ChromeExt=new e}();
